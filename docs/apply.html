<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<title>apply</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">Library apply</h1>

<div class="code">
</div>

<div class="doc">
<a name="lab10"></a><h2 class="section">apply</h2>


<div class="paragraph"> </div>

apply も move: と同様に証明項として関数適用を構築します。
しかし、move: とは異なり、apply に指定したものが
関数適用の（引数位置ではなく）関数位置に入ります。

<div class="paragraph"> </div>

これを説明するのに、
P と P -&gt; Q が成り立っていたら Q が成り立つという三段論法の証明を使いましょう。

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Section</span> <a name="Apply"><span class="id" title="section">Apply</span></a>.<br/>

<br/>
</div>

<div class="doc">
証明項が煩雑になるのを避けるため、Section を使って
命題 P, Q および P の証明 Hp, P -&gt; Q の証明 Hpq を宣言します。

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Variable</span> <a name="Apply.P"><span class="id" title="variable">P</span></a> <a name="Apply.Q"><span class="id" title="variable">Q</span></a> : <span class="id" title="keyword">Prop</span>.<br/>
<span class="id" title="keyword">Variable</span> <a name="Apply.Hp"><span class="id" title="variable">Hp</span></a> : <a class="idref" href="apply.html#Apply.P"><span class="id" title="variable">P</span></a>.<br/>
<span class="id" title="keyword">Variable</span> <a name="Apply.Hpq"><span class="id" title="variable">Hpq</span></a> : <a class="idref" href="apply.html#Apply.P"><span class="id" title="variable">P</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.0/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="apply.html#Apply.Q"><span class="id" title="variable">Q</span></a>.<br/>

<br/>
</div>

<div class="doc">
三段論法の結論 Q を証明します。

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="modus_ponens"><span class="id" title="lemma">modus_ponens</span></a> : <a class="idref" href="apply.html#Apply.Q"><span class="id" title="variable">Q</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Show</span> <span class="id" title="keyword">Proof</span>.<br/>
</div>

<div class="doc">
<pre>
?Goal
</pre>
最初の段階では証明項は構築されていないので ?Goal と表示されます。

</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="apply.html#Apply.Hpq"><span class="id" title="variable">Hpq</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Show</span> <span class="id" title="keyword">Proof</span>.<br/>
</div>

<div class="doc">
<pre>
(Hpq ?Goal)
</pre>
apply Hpq により、証明項として関数適用が構築され、
その関数位置に apply に指定した Hpq が配置されます。
引数は ?Goal となっていて、まだ構築されていません。

<div class="paragraph"> </div>

この証明項は (Q の証明なので) Q 型の値でなければなりませんが、
それが関数適用とすると、その関数は Q 型の値を返す関数である必要があります。
Hpq は P -&gt; Q 型の値なので、この必要性を満たしています。
Hpq の引数は P 型の値でなければならないので、これから構築する ?Goal は P 型であり、
つまりここから証明すべき命題は P となります。

</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <a class="idref" href="apply.html#Apply.Hp"><span class="id" title="variable">Hp</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Show</span> <span class="id" title="keyword">Proof</span>.<br/>
</div>

<div class="doc">
<pre>
(Hpq Hp)
</pre>
P を証明するのは簡単です。
P 型の値として Hp があるので、それを exact Hp として証明項とすれば終わりです。
そうすると、結局、全体の証明項は Hpq Hp となります。

</div>
<div class="code">
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="apply.html#Apply"><span class="id" title="section">Apply</span></a>.<br/>

<br/>
<span class="id" title="keyword">Print</span> <a class="idref" href="apply.html#modus_ponens"><span class="id" title="lemma">modus_ponens</span></a>.<br/>
</div>

<div class="doc">
<pre>
modus_ponens =
fun (P Q : Prop) (Hp : P) (Hpq : P -&gt; Q) =&gt; Hpq Hp
     : forall P Q : Prop, P -&gt; (P -&gt; Q) -&gt; Q
</pre>

<div class="paragraph"> </div>

section を終ってから三段論法の証明項を Print で表示すると上のようになります。

<div class="paragraph"> </div>

Hpq Hp という項に、P, Q, Hp, Hpq という引数の関数抽象が外側にくくられた
証明項になっていることがわかります。

<div class="paragraph"> </div>


</div>
<div class="code">
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>